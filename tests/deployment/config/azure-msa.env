# MSA Development Subscription Configuration
# Free Tier Expires: ~March 14, 2026 (4.5 months remaining)

# Azure Subscription Details
AZURE_SUBSCRIPTION_ID="84e4677e-2b09-4e55-89a7-06fec49fec19"
AZURE_TENANT_ID="5c0a5d54-e03d-4ab6-8383-bea43e16ba22"
AZURE_SUBSCRIPTION_NAME="msalsouri"

# Already authenticated via Azure CLI (no service principal needed for local testing)
AUTH_METHOD="cli"  # Use existing az login
# User: msalsouri@hotmail.com

# Preferred regions (closer to UK, better latency)
AZURE_LOCATION="uksouth"
AZURE_LOCATION_SECONDARY="westeurope"
AZURE_LOCATION_TERTIARY="eastus"

# Free tier optimization settings
USE_FREE_TIER_RESOURCES="true"
FREE_TIER_EXPIRATION="2026-03-14"
AZURE_RESOURCE_GROUP_PREFIX="rg-azmp-free"

# Conservative cost controls for free tier
MAX_DEPLOYMENT_COST_USD="2.00"
MAX_DAILY_COST_USD="5.00"
MAX_WEEKLY_COST_USD="20.00"
BUDGET_MONTHLY_LIMIT_GBP="100.00"
BUDGET_NAME="azmp-test-vm-01-budget"

# Resource lifecycle management
RESOURCE_TTL_HOURS="2"  # Shorter TTL to preserve free tier quota
AUTO_CLEANUP="true"
CLEANUP_ON_FAILURE="true"
CLEANUP_IMMEDIATELY="true"
TAG_AUTO_SHUTDOWN="true"
TAG_ENVIRONMENT="Development"
TAG_COST_CENTER="Free-Tier"

# Free tier eligible VM sizes (750 hours/month free until March 2026)
FREE_TIER_VM_SIZE="Standard_B1s"  # 1 vCPU, 1 GB RAM (Linux only)
FREE_TIER_VM_OS="Linux"  # Windows NOT included in free tier

# Spot VM settings (for post-free-tier usage)
SPOT_VM_ENABLED="true"
SPOT_DEFAULT_MAX_PRICE="-1"  # Pay up to on-demand price
SPOT_EVICTION_POLICY="Deallocate"  # Preserve VM config and disks

# Storage free tier (5 GB LRS)
FREE_TIER_STORAGE_TYPE="Standard_LRS"
FREE_TIER_STORAGE_GB="5"

# Networking free tier
FREE_TIER_PUBLIC_IP_HOURS="750"  # Static IP, 750 hours/month free
FREE_TIER_LOAD_BALANCER_HOURS="750"
FREE_TIER_BANDWIDTH_GB="15"  # Outbound data transfer

# Monitoring and diagnostics
ENABLE_BOOT_DIAGNOSTICS="true"
ENABLE_LOG_ANALYTICS="false"  # Not free tier eligible
ENABLE_MONITORING_EXTENSION="false"  # Avoid costs
ENABLE_SECURITY_EXTENSION="false"  # Avoid costs

# Deployment naming conventions
DEPLOYMENT_NAME_PREFIX="azmp-free-tier"
RESOURCE_NAME_FORMAT="{prefix}-{scenario}-{timestamp}"

# Testing scenarios
TEST_SCENARIO_FREE_TIER="free-tier"  # Use B1s, 750 hrs/month free
TEST_SCENARIO_SPOT_BASIC="spot-basic"  # B2s Spot, ~$2/month
TEST_SCENARIO_SPOT_COMPUTE="spot-compute"  # F4s_v2 Spot, ~$5/month

# Current subscription status (as of Oct 27, 2025)
SUBSCRIPTION_STATE="Enabled"
CURRENT_BUDGET_SPENT_GBP="0.13"
BUDGET_UTILIZATION_PERCENT="0.13"
FREE_TIER_MONTHS_REMAINING="4.5"

# Alert thresholds
ALERT_BUDGET_THRESHOLD_PERCENT="80"
ALERT_BUDGET_FORECAST_PERCENT="90"
ALERT_EMAIL="msalsouri@hotmail.com"

# Deployment validation settings
DRY_RUN="true"  # Always validate before deploying
VALIDATE_COSTS="true"  # Check cost estimates before deployment
REQUIRE_CONFIRMATION="true"  # Manual approval for deployments
LOG_DEPLOYMENT_DETAILS="true"

# Cost tracking
TRACK_COSTS_PER_DEPLOYMENT="true"
COST_REPORT_FREQUENCY="daily"
COST_REPORT_FORMAT="json"
COST_REPORT_PATH="./tests/deployment/results/costs"

# Resource cleanup policies
CLEANUP_FAILED_DEPLOYMENTS="true"
CLEANUP_AFTER_HOURS="2"
RETAIN_LOGS="true"
LOG_RETENTION_DAYS="30"
