{
    "$schema": "https://schema.management.azure.com/schemas/viewdefinition/0.0.1-preview/ViewDefinition.json#",
    "contentVersion": "1.0.0.0",
    "metadata": {
        "_generator": {
            "name": "Azure Marketplace Generator", 
            "version": "0.1.0"
        },
        "description": "Post-deployment view for test-enhanced-security by HOILTD"
    },
    "views": [
        {
            "kind": "Overview",
            "properties": {
                "header": "test-enhanced-security - Storage Account Overview",
                "description": "Monitor and manage your deployed storage account",
                "commands": [
                    {
                        "displayName": "Open Storage Account",
                        "path": "storageAccount",
                        "icon": "MsPortalFx.Base.Images.Browse"
                    }
                ]
            }
        },
        {
            "kind": "CustomResources",
            "properties": {
                "displayName": "Storage Resources", 
                "version": "1.0.0.0",
                "resourceType": "Microsoft.Storage/storageAccounts",
                "createUIDefinition": {},
                "commands": [
                    {
                        "displayName": "Browse Storage Account",
                        "path": "storageAccount/browse",
                        "icon": "MsPortalFx.Base.Images.Browse"
                    },
                    {
                        "displayName": "Storage Keys", 
                        "path": "storageAccount/keys",
                        "icon": "MsPortalFx.Base.Images.Key"
                    },
                    {
                        "displayName": "Containers",
                        "path": "storageAccount/containers", 
                        "icon": "MsPortalFx.Base.Images.Folder"
                    }
                ]
            }
        },
        {
            "kind": "Metrics",
            "properties": {
                "displayName": "Storage Metrics",
                "version": "1.0.0.0", 
                "charts": [
                    {
                        "displayName": "Storage Usage",
                        "chartType": "Line",
                        "metrics": [
                            {
                                "resourceMetadata": {
                                    "id": "[concat('/subscriptions/', subscription().subscriptionId, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Storage/storageAccounts/', outputs('storageAccountName'))]"
                                },
                                "name": "UsedCapacity",
                                "aggregationType": "Average",
                                "namespace": "Microsoft.Storage/storageAccounts",
                                "displayName": "Used Capacity"
                            }
                        ]
                    },
                    {
                        "displayName": "Transaction Count",
                        "chartType": "Line", 
                        "metrics": [
                            {
                                "resourceMetadata": {
                                    "id": "[concat('/subscriptions/', subscription().subscriptionId, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Storage/storageAccounts/', outputs('storageAccountName'))]"
                                },
                                "name": "Transactions",
                                "aggregationType": "Total",
                                "namespace": "Microsoft.Storage/storageAccounts/blobServices",
                                "displayName": "Total Transactions"
                            }
                        ]
                    }
                ]
            }
        }
    ]
}