# Azure Marketplace VM Templates - v2.1.0

Production-ready ARM templates generated by `@hoiltd/azure-marketplace-generator` with `@hoiltd/azmp-plugin-vm@2.1.0`.

## üì¶ Package Contents

### Minimal Configuration
**Directory**: `minimal/`

A lightweight VM deployment suitable for development and testing:
- **VM Size**: Standard_B2s (2 vCPUs, 4 GB RAM)
- **OS**: Ubuntu 22.04 LTS
- **Storage**: Standard_LRS managed disk
- **Networking**: Public IP, NSG with SSH access
- **Authentication**: SSH public key

**Files**:
- `mainTemplate.json` - Main ARM template (7.7 KB)
- `createUiDefinition.json` - Azure Portal deployment UI (42 KB)
- `viewDefinition.json` - Managed application view (5.0 KB)

### Enterprise Configuration
**Directory**: `enterprise/`

A production-grade VM deployment with high availability and monitoring:
- **VM Size**: Standard_D8s_v3 (8 vCPUs, 32 GB RAM)
- **OS**: Ubuntu 22.04 LTS
- **Storage**: Premium_LRS with 3 data disks (1024 GB, 2048 GB, 512 GB)
- **Networking**: Private deployment, Bastion host, Load Balancer
- **High Availability**: Availability Set enabled
- **Monitoring**: Production preset with alert notifications
- **Backup**: Enhanced backup policy with Recovery Services Vault

**Files**:
- `mainTemplate.json` - Main ARM template (13 KB)
- `createUiDefinition.json` - Azure Portal deployment UI (42 KB)
- `viewDefinition.json` - Managed application view (5.9 KB)

## ‚úÖ Certification Status

- **ARM-TTK Compliance**: 98% (46/47 tests passing)
- **Plugin Version**: @hoiltd/azmp-plugin-vm@2.1.0
- **Test Coverage**: 801 automated tests passed
- **Production Ready**: Approved for Azure Marketplace submission

## üöÄ Partner Center Submission

### Prerequisites
1. Active Azure Marketplace publisher account
2. Completed Partner Center offer configuration
3. Valid Azure subscription for testing

### Submission Steps

1. **Prepare Package**
   ```bash
   # Download the appropriate configuration
   unzip azmp-vm-templates-minimal-v2.1.0.zip
   # or
   unzip azmp-vm-templates-enterprise-v2.1.0.zip
   ```

2. **Upload to Partner Center**
   - Navigate to your offer's Technical Configuration
   - Upload `mainTemplate.json` as the main template
   - Upload `createUiDefinition.json` for portal UI
   - (Optional) Upload `viewDefinition.json` for managed app views

3. **Configure Properties**
   - Set deployment mode to "Incremental"
   - Enable customer usage attribution (if applicable)
   - Configure marketplace categories and pricing

4. **Validate Deployment**
   - Use Partner Center's deployment preview
   - Test in your Azure subscription first
   - Verify all resources deploy correctly

5. **Submit for Certification**
   - Complete marketplace listing details
   - Submit for Microsoft certification review
   - Address any certification feedback

## üîß Customization

These templates are generated from configuration files. To customize:

1. **Install the Generator**
   ```bash
   npm install -g @hoiltd/azure-marketplace-generator@^3.1.0
   npm install -g @hoiltd/azmp-plugin-vm@^2.1.0
   ```

2. **Create Custom Configuration**
   ```json
   {
     "vmName": "my-custom-vm",
     "vmSize": "Standard_D4s_v3",
     "location": "East US",
     "osType": "Linux",
     "osVersion": "22.04-LTS",
     "storageType": "Premium_LRS",
     "enableBackup": true,
     "enableMonitoring": true
   }
   ```

3. **Generate Templates**
   ```bash
   azmp vm template generate --config my-config.json --output ./my-templates
   ```

4. **Validate**
   ```bash
   azmp vm template validate ./my-templates
   ```

## üìä Template Specifications

### Parameters Available

Both templates expose Azure Portal parameters for:
- Location and resource naming
- VM size and OS image selection
- Authentication (password or SSH key)
- Networking configuration (VNET, subnet, NSG rules)
- Storage options (disk types, sizes)
- Monitoring and backup settings (enterprise only)
- High availability options (enterprise only)

### Resources Deployed

**Minimal**:
- 1 Virtual Machine
- 1 Network Interface
- 1 Public IP Address
- 1 Network Security Group
- 1 Virtual Network with subnet
- 1 Managed OS Disk

**Enterprise**:
- 1 Virtual Machine
- 1 Network Interface (private)
- 1 Network Security Group
- 1 Virtual Network with multiple subnets
- 1 Bastion Host with Public IP
- 1 Load Balancer (Standard SKU)
- 1 Availability Set
- 4 Managed Disks (1 OS + 3 data)
- 1 Recovery Services Vault with backup policy
- 1 Log Analytics Workspace
- Azure Monitor alert rules and action groups

## üîê Security Features

- **Trusted Launch**: SecureBoot and vTPM enabled (configurable)
- **NSG Rules**: SSH/RDP restricted to authorized IPs
- **Managed Identities**: System-assigned identity for Azure resource access
- **Disk Encryption**: Azure Disk Encryption compatible
- **Network Isolation**: Private networking with Bastion (enterprise)

## üìñ Documentation

- **Plugin Repository**: https://github.com/HOME-OFFICE-IMPROVEMENTS-LTD/azmp-plugin-vm
- **Generator Repository**: https://github.com/HOME-OFFICE-IMPROVEMENTS-LTD/azure-marketplace-generator
- **Release Notes**: https://github.com/HOME-OFFICE-IMPROVEMENTS-LTD/azmp-plugin-vm/releases/tag/v2.1.0
- **Integration Guide**: See generator repository docs/INTEGRATION_GUIDE.md

## üêõ Support

- **GitHub Issues**: https://github.com/HOME-OFFICE-IMPROVEMENTS-LTD/azmp-plugin-vm/issues
- **npm Package**: https://www.npmjs.com/package/@hoiltd/azmp-plugin-vm

## üìÑ License

MIT License - HOME OFFICE IMPROVEMENTS LTD

---

**Generated**: October 31, 2025  
**Plugin Version**: @hoiltd/azmp-plugin-vm@2.1.0  
**Generator Version**: @hoiltd/azure-marketplace-generator@3.1.0
