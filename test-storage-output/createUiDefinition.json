{
  "$schema": "https://schema.management.azure.com/schemas/2021-09-09/uiDefinition.schema.json#",
  "view": {
    "kind": "Form",
    "properties": {
      "title": "TestStorageApp by TestPublisher",
      "steps": [
        {
          "name": "basics",
          "label": "Basics",
          "elements": [
            {
              "name": "resourceScope",
              "type": "Microsoft.Common.ResourceScope",
              "location": {
                "resourceTypes": [
                  "Microsoft.Storage/storageAccounts"
                ]
              }
            },
            {
              "name": "storageAccountName",
              "type": "Microsoft.Common.TextBox",
              "label": "Storage Account Name",
              "placeholder": "Enter storage account name",
              "toolTip": "Storage account name must be globally unique, 3-24 characters, lowercase letters and numbers only",
              "constraints": {
                "required": true,
                "regex": "^[a-z0-9]{3,24}$",
                "validationMessage": "Storage account name must be 3-24 characters, lowercase letters and numbers only"
              },
              "visible": true
            }
          ]
        },
        {
          "name": "storageConfig",
          "label": "Storage Configuration",
          "elements": [
            {
              "name": "storageAccountType",
              "type": "Microsoft.Common.DropDown",
              "label": "Storage Account Type",
              "placeholder": "Select storage replication type",
              "toolTip": "Choose the storage replication type based on your durability and performance requirements",
              "constraints": {
                "allowedValues": [
                  {
                    "label": "Locally Redundant Storage (LRS)",
                    "description": "Data is replicated within a single data center. Lowest cost option.",
                    "value": "Standard_LRS"
                  },
                  {
                    "label": "Geo-Redundant Storage (GRS)",
                    "description": "Data is replicated to a secondary region. Recommended for critical workloads.",
                    "value": "Standard_GRS"
                  },
                  {
                    "label": "Read-Access Geo-Redundant Storage (RA-GRS)",
                    "description": "GRS with read access to secondary region. Best for high availability.",
                    "value": "Standard_RAGRS"
                  },
                  {
                    "label": "Zone-Redundant Storage (ZRS)",
                    "description": "Data is replicated across multiple availability zones.",
                    "value": "Standard_ZRS"
                  },
                  {
                    "label": "Premium Locally Redundant Storage (Premium LRS)",
                    "description": "High-performance storage with SSD disks.",
                    "value": "Premium_LRS"
                  },
                  {
                    "label": "Premium Zone-Redundant Storage (Premium ZRS)",
                    "description": "High-performance storage replicated across zones.",
                    "value": "Premium_ZRS"
                  }
                ],
                "required": true
              },
              "defaultValue": "Standard_LRS",
              "visible": true
            },
            {
              "name": "containerName",
              "type": "Microsoft.Common.TextBox",
              "label": "Container Name",
              "placeholder": "data",
              "toolTip": "Name of the blob container to create",
              "constraints": {
                "required": true,
                "regex": "^[a-z0-9]([a-z0-9\\-]*[a-z0-9])?$",
                "validationMessage": "Container name must be 3-63 characters, lowercase letters, numbers, and hyphens only"
              },
              "defaultValue": "data",
              "visible": true
            }
          ]
        },
        {
          "name": "advancedConfig",
          "label": "Advanced Configuration",
          "elements": [
            {
              "name": "enableHierarchicalNamespace",
              "type": "Microsoft.Common.CheckBox",
              "label": "Enable Data Lake Storage Gen2",
              "toolTip": "Enable hierarchical namespace for Azure Data Lake Storage Gen2 features",
              "constraints": {
                "required": false
              },
              "visible": true
            },
            {
              "name": "enableBlobEncryption",
              "type": "Microsoft.Common.CheckBox",
              "label": "Enable Blob Encryption",
              "toolTip": "Enable encryption at rest for blob storage",
              "constraints": {
                "required": false
              },
              "defaultValue": true,
              "visible": true
            },
            {
              "name": "tags",
              "type": "Microsoft.Common.TagsByResource",
              "resources": [
                "Microsoft.Storage/storageAccounts"
              ],
              "toolTip": "Add tags to organize and manage your resources"
            }
          ]
        }
      ]
    },
    "outputs": {
      "location": "[steps('basics').resourceScope.location.name]",
      "storageAccountName": "[steps('basics').storageAccountName]",
      "storageAccountType": "[steps('storageConfig').storageAccountType]",
      "containerName": "[steps('storageConfig').containerName]",
      "enableHierarchicalNamespace": "[steps('advancedConfig').enableHierarchicalNamespace]",
      "enableBlobEncryption": "[steps('advancedConfig').enableBlobEncryption]",
      "tags": "[steps('advancedConfig').tags]"
    }
  }
}